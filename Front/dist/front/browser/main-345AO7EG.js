import{A as W,B as V,C as I,D as N,E as F,F as j,G as B,H as R,I as z,J as U,K as k,L as G,a as b,b as f,c as C,d as l,e as c,f as u,g as d,h as i,i as o,j as y,k as _,l as h,m as s,n as r,o as w,p as P,q as v,r as x,s as M,t as S,u as L,v as E,w as O,x as T,y as A,z as D}from"./chunk-HF46XWZN.js";function X(e,g){e&1&&(i(0,"h2"),r(1,"Connexion"),o())}function Z(e,g){e&1&&(i(0,"h2"),r(1,"Cr\xE9er un compte"),o())}function $(e,g){if(e&1){let t=_();i(0,"div",2)(1,"label"),r(2,"Firstname"),o(),i(3,"input",8),M("ngModelChange",function(n){f(t);let m=s();return x(m.firstname,n)||(m.firstname=n),C(n)}),o()()}if(e&2){let t=s();l(3),v("ngModel",t.firstname)}}function ee(e,g){if(e&1){let t=_();i(0,"div",2)(1,"label"),r(2,"Lastname"),o(),i(3,"input",9),M("ngModelChange",function(n){f(t);let m=s();return x(m.lastname,n)||(m.lastname=n),C(n)}),o()()}if(e&2){let t=s();l(3),v("ngModel",t.lastname)}}function te(e,g){if(e&1&&(i(0,"div",5),r(1),o()),e&2){let t=s();l(),w(t.error)}}var H=(()=>{class e{constructor(t,a,n){this.auth=t,this.router=a,this.usersService=n,this.firstname="",this.lastname="",this.login="",this.password="",this.error="",this.signupMode=!1}submit(){if(!this.signupMode)this.auth.login(this.login,this.password).subscribe(t=>{t?this.router.navigate(["/pollution/list"]):this.error="Identifiants invalides"});else{let t={login:this.login,password:this.password,firstname:this.firstname,lastname:this.lastname};this.auth.signup(t).subscribe(a=>{a?this.router.navigate(["/pollution/list"]):this.error="Impossible de cr\xE9er le compte (login peut exister)"})}}toggleSignup(){this.signupMode=!this.signupMode,this.error=""}static{this.\u0275fac=function(a){return new(a||e)(c(k),c(A),c(U))}}static{this.\u0275cmp=b({type:e,selectors:[["app-login"]],standalone:!0,features:[S],decls:19,vars:8,consts:[[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["name","login",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"error"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-link",3,"click"],["name","firstname",1,"form-control",3,"ngModelChange","ngModel"],["name","lastname",1,"form-control",3,"ngModelChange","ngModel"]],template:function(a,n){a&1&&(i(0,"div",0),u(1,X,2,0,"h2")(2,Z,2,0,"h2"),i(3,"form",1),h("ngSubmit",function(){return n.submit()}),u(4,$,4,1,"div",2)(5,ee,4,1,"div",2),i(6,"div",2)(7,"label"),r(8,"Login"),o(),i(9,"input",3),M("ngModelChange",function(p){return x(n.login,p)||(n.login=p),p}),o()(),i(10,"div",2)(11,"label"),r(12,"Mot de passe"),o(),i(13,"input",4),M("ngModelChange",function(p){return x(n.password,p)||(n.password=p),p}),o()(),u(14,te,2,1,"div",5),i(15,"button",6),r(16),o(),i(17,"button",7),h("click",function(){return n.toggleSignup()}),r(18," {{ signupMode ? 'J'ai d\xE9j\xE0 un compte' : 'Cr\xE9er un compte' }} "),o()()()),a&2&&(l(),d(1,n.signupMode?-1:1),l(),d(2,n.signupMode?2:-1),l(2),d(4,n.signupMode?4:-1),l(),d(5,n.signupMode?5:-1),l(4),v("ngModel",n.login),l(4),v("ngModel",n.password),l(),d(14,n.error?14:-1),l(2),P(" ",n.signupMode?"Cr\xE9er le compte":"Se connecter"," "))},dependencies:[L,z,R,I,N,F,B,j],styles:[".login-container[_ngcontent-%COMP%]{max-width:420px;margin:24px auto;padding:16px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px}.error[_ngcontent-%COMP%]{color:#b00020;margin-bottom:8px}"]})}}return e})();var J=[{path:"login",component:H},{path:"",redirectTo:"/pollution/list",pathMatch:"full"},{path:"pollution",loadChildren:()=>import("./chunk-42ILK4OC.js").then(e=>e.PollutionModule)},{path:"**",redirectTo:"/pollution/list"}];var Y={providers:[V(J),E()]};function ne(e,g){if(e&1){let t=_();i(0,"div",7)(1,"span"),r(2),o(),i(3,"button",10),h("click",function(){f(t);let n=s();return C(n.logout())}),r(4,"Se d\xE9connecter"),o()()}if(e&2){let t=s();l(2),w(t.userName)}}var q=(()=>{class e{constructor(t){this.auth=t,this.title="Pollution Tracker",this.userName=""}ngOnInit(){this.auth.getCurrentUser().subscribe(t=>{this.userName=t?`${t.firstname} ${t.lastname}`:""})}logout(){this.auth.logout()}static{this.\u0275fac=function(a){return new(a||e)(c(k))}}static{this.\u0275cmp=b({type:e,selectors:[["app-root"]],standalone:!0,features:[S],decls:18,vars:1,consts:[[1,"app-container"],[1,"navbar"],[1,"navbar-brand"],[1,"navbar-menu"],["routerLink","/pollution/list","routerLinkActive","active",1,"nav-link"],["routerLink","/pollution/report","routerLinkActive","active",1,"nav-link"],["routerLink","/login","routerLinkActive","active",1,"nav-link"],[1,"nav-user"],[1,"main-content"],[1,"footer"],[1,"btn","btn-link",3,"click"]],template:function(a,n){a&1&&(i(0,"div",0)(1,"nav",1)(2,"div",2)(3,"h1"),r(4,"\u{1F30D} Pollution Tracker"),o()(),i(5,"div",3)(6,"a",4),r(7," \u{1F4CB} Liste des pollutions "),o(),i(8,"a",5),r(9," \u2795 Signaler une pollution "),o(),i(10,"a",6),r(11," \u{1F510} Connexion "),o(),u(12,ne,5,1,"div",7),o()(),i(13,"main",8),y(14,"router-outlet"),o(),i(15,"footer",9)(16,"p"),r(17," \xA9 2025 Pollution Tracker - Application de signalement de pollutions "),o()()()),a&2&&(l(12),d(12,n.userName?12:-1))},dependencies:[T,D,W,G],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background-color:#f5f6fa}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.9375rem 1.875rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 .25rem .75rem #00000026}.navbar-brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin:0}.navbar-menu[_ngcontent-%COMP%]{display:flex;gap:1.25rem}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:.625rem 1.25rem;border-radius:.375rem;font-weight:500;transition:all .3s;background:#ffffff1a}.nav-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-.125rem)}.nav-link.active[_ngcontent-%COMP%]{background:#ffffff4d;font-weight:700}.main-content[_ngcontent-%COMP%]{flex:1;padding:1.25rem;max-width:100%}.footer[_ngcontent-%COMP%]{background:#2c3e50;color:#fff;text-align:center;padding:1.25rem;margin-top:auto}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}@media (max-width: 48rem){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:.9375rem;padding:.9375rem 1.25rem}.navbar-brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.navbar-menu[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:.625rem}.nav-link[_ngcontent-%COMP%]{text-align:center}.main-content[_ngcontent-%COMP%]{padding:.625rem}}"]})}}return e})();O(q,Y).catch(e=>console.error(e));
